<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pi_hexapod_control: PI Hexapod Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pi_hexapod_control
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PI Hexapod Control </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package contains the ROS Driver for Hexapods from Physik Intrumente (PI).</p>
<p>This includes a controller manager as standalone node as well as launch files and configurations as easy starting point for your ROS application.</p>
<p>The package is using ROS control and builds on the known interfaces and paradigms.</p>
<h1>License</h1>
<p>Please consider the license information provided with this repository.</p>
<h1>Setup</h1>
<p>Due to the library used for connecting to the PI Hexapod, this Driver can only be used on x86-64 architectures.</p>
<p>A number of general ROS tutorials can be found at the <a href="http://wiki.ros.org/ROS/Tutorials">ROS wiki</a>. To install ROS Melodic for Ubuntu 18.04 follow the instructions given at <a href="http://wiki.ros.org/melodic/Installation/Ubuntu">Melodic for Ubuntu</a>. For other ROS Distributions or target platforms, see <a href="http://wiki.ros.org/ROS/Installation">ROS Wiki</a>.</p>
<p>To create a workspace, refer to <a href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment">this tutorial</a> or follow these abbreviated instructions for ROS Melodic: </p><div class="fragment"><div class="line">source /opt/ros/melodic/setup.bash</div>
<div class="line">mkdir -p ~/catkin_ws/src</div>
<div class="line">cd ~/catkin_ws/</div>
<div class="line">catkin_make</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><p>Clone this repository, install dependencies and build the workspace: </p><div class="fragment"><div class="line">  cd src</div>
<div class="line">  # clone this repository: git clone ...</div>
<div class="line">  cd ~/catkin_ws/</div>
<div class="line">  rosdep install --from-paths src --ignore-src -r -y</div>
<div class="line">  catkin_make</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><p>Now, the driver is ready to be used. For example, run the following command to start a simulated hexapod and an interactive marker to control it: </p><div class="fragment"><div class="line">roslaunch pi_hexapod_control interactive_marker.launch sim:=true</div>
</div><!-- fragment --><h1>PI GCS2 Library</h1>
<p>As default, pi_hexapod_control is build against <code>libpi_pi_gcs2-3.11.0.a</code> provided in the <code>lib</code> directory of this package. To build against a shared version of this library, set the <code>PI_GCS2_PATH</code> cmake option. </p><div class="fragment"><div class="line">catkin_make --cmake-args -DPI_GCS2_PATH=&quot;/usr/local/PI/lib64/libpi_pi_gcs2.so.3.11.0&quot;</div>
</div><!-- fragment --><h1>Usage</h1>
<h2>Launch files</h2>
<p>A number of launch files are included to serve as example on how to configure and use the Driver.</p>
<p><code>hexapod_common_control.launch</code> provides an elaborate example on how to connect to a hexapod. It can be used as standalone configuration to interact with hardware or a simulated hexapod. Also, it can be easily included in other launch files, allowing for easy configuration due to using smart default arguments. For example, <code>interactive_marker.launch</code> and <code>rqt_gui.launch</code> build onto <code>hexapod_common_control.launch</code> resulting in easy to understand configurations. It is advised to not use the interactive marker and the RQT gui at the same time.</p>
<p><code>interactive_marker.launch</code> provides an interactive marker server to control a hexapod via RViz. For more information on its functionality, see <a class="el" href="index.html#interactive_marker">Interactive Marker Node</a>.</p>
<p><code>rqt_gui.launch</code> provides an different interface to control a hexapod. A precofigured RQT perspective with a costum control interface is launched. If you expirience problems launching this RQT perspective, have a lock at the README provided with the <code>pi_hexapod_gui</code> package for more details.</p>
<h2>Controller Manager Node</h2>
<p><a class="anchor" id="controller_manager_node"></a>This node provides a controller manager and hardware interface to interact with a PI Hexapod. The driver can connect to PI Hexapod Hardware via TCP/IP or serial connection. Also, the hexapod can be simulated without requiring a connection to hardware.</p>
<h3>Parameters:</h3>
<p>Exactly one of <code>using_tcp_ip_connection</code> or <code>using_rs232_connection</code> needs to be set to true, determining the connection type.</p>
<p>If TCP/IP is choosen, the string <code>hexapod_ip</code> needs to be set. Additionally, the integer <code>hexapod_port</code> can be set, its default is 50000.</p>
<p>If serial connection is choosen, the integers <code>rs232_port_nr</code> and <code>baudrate</code> need to be specified.</p>
<p><code>is_sim</code> can be set to true to use a simulated hexapod instead of a connection to a real one. Its default value is false.</p>
<p><code>auto_referencing</code> allows to start referencing the hexapod on startup without the need to call the referencing action.</p>
<p><code>prefer_stop_over_halt</code> allows to define the hardware behavior in case of a unexpected shutdown. Setting this boolean to true results in the more strict STP command word being used to stop the Hexapod instead of a HLT command. The parameters default value is false.</p>
<p><code>hardware_interface/controller_rate</code>: positive double providing the main control loop rate in Hz, default=1000</p>
<p><code>hardware_interface/joints</code> and <code>hardware_interface/visual_joints</code> need to be set. The <code>hardware_interface/</code> parameters are set via the provided <code>cfg/hexapod_controllers.yaml</code>.</p>
<h3>Actions:</h3>
<p><code>referencing</code> of type <code>pi_hexapod_msgs::ReferencingAction</code>: Allows to manually start the referencing of the hexapods axes.</p>
<h2>Interactive Marker Node</h2>
<p><a class="anchor" id="interactive_marker"></a>This nodes provides an interactive marker server allowing the user to control the hexapod from RViz.</p>
<h3>Parameters:</h3>
<p>Direct node parameter: <code>rate</code> (default=10): Command publishing rate <code>autostart_publishing_commands</code> (default=false): interactive marker starts sending commands to JointGroupPosController directly after startup, if set to true <code>topic_ns</code> (default="pi\_interactive\_marker"): namespace in which to current marker pose is published</p>
<p>Parameter found in Hexapod configuration YAML: <code>interactive_marker/control_scale</code> (default=1): scales the size of control elements <code>interactive_marker/base_frame</code> (default="zero_link"): Frame name of the zero position frame of the hexapod</p>
<p><code>x/lower_limit</code>, <code>x/upper_limit</code>, <code>y/lower_limit</code>, <code>y/upper_limit</code>, <code>z/lower_limit</code>, <code>z/upper_limit</code>, <code>u/lower_limit</code>, <code>u/upper_limit</code>, <code>v/lower_limit</code>, <code>v/upper_limit</code>, <code>w/lower_limit</code>, <code>w/upper_limit</code>: defining movement limits</p>
<p><code>interactive_marker/scale/x</code>, <code>interactive_marker/scale/y</code>, <code>interactive_marker/scale/z</code>, <code>interactive_marker/position/x</code>, <code>interactive_marker/position/y</code>, <code>interactive_marker/position/z</code>, <code>interactive_marker/orientation/w</code>, <code>interactive_marker/orientation/x</code>, <code>interactive_marker/orientation/y</code>, <code>interactive_marker/orientation/z</code>, <code>interactive_marker/color/r</code>, <code>interactive_marker/color/g</code>, <code>interactive_marker/color/b</code>, <code>interactive_marker/color/a</code>: defining the optics of the interactive marker</p>
<h3>Publisher:</h3>
<p><code>pose</code> of type <code>geometry_msgs::PoseStamped</code>: Publishes the current pose of the interactive marker.</p>
<p><code>command</code> of <code>std_msgs::Float64MultiArray</code>: Publishes JointGroupPositionController command, if set to active via startup parameter, service call or context menu in RViz.</p>
<h3>Subcriber:</h3>
<p><code>joint_states</code> of type <code>sensor_msgs::JointState</code>: Requires current joint states of the hexapod.</p>
<h3>Services:</h3>
<p>Services can also be activated via the context menu in RViz accessed via right clicking the interactive marker.</p>
<p><code>activate_command_publishing</code> of type <code>std_srvs::SetBool</code>: De-/activates command publishing.</p>
<p><code>set_to_zero</code> of type <code>std_srvs::Empty</code>: Resets marker position to zero.</p>
<p><code>set_to_current</code> of <code>type std_srvs::Empty</code>: Sets marker to current hexapod position.</p>
<p><code>send_single_command</code> of type <code>std_srvs::Empty</code>: Send a single command message to the <code>command</code> topic.</p>
<h1>Documentation</h1>
<p>This package is documented with Doxygen (<code>apt install doxygen</code>). Create the documentation by executing <code>doxygen Doxyfile</code> in the package root directory. HTML documentation will be generated in the <code>doc/html</code> directory and can be easily accessed by opening <code>doc/html/index.html</code> in a web browser.</p>
<h1>Software Architecture</h1>
<p>The packages builds onto ROS Control and provides an abstraction of PI Hexapods by implementing <code>hardware_interface::RobotHW</code> and a Controller Manager as standalone node. <code>JointStateInterface</code> and <code>PositionJointInterface</code> are provided to be used with common ROS Controllers or to develop costum ones.</p>
<p>The user can interact with the Hexapod through Controllers and tooling building onto them. There are also direct interaction options with the controller, see <a class="el" href="index.html#controller_manager_node">Controller Manager Node</a> for details.</p>
<p>A sketch of the software architecture and possible User interfaces is provided as following: </p><div class="image">
<img src="architecture.png" alt=""/>
</div>
    </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
